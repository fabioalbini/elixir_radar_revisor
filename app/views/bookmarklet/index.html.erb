<%
  revision_service_url =
    if Rails.env.production?
      'https://elixir-radar-revisor.herokuapp.com/revisions.html'
    else
      'http://localhost:3000/revisions.html'
    end
%>
Arraste este link para sua barra de favoritos:

<a href="javascript:(function(e,a,g,h,f,c,b,d){if(!(f=e.jQuery)||g>f.fn.jquery||h(f)){c=a.createElement(&quot;script&quot;);c.type=&quot;text/javascript&quot;;c.src=&quot;http://ajax.googleapis.com/ajax/libs/jquery/&quot;+g+&quot;/jquery.min.js&quot;;c.onload=c.onreadystatechange=function(){if(!b&amp;&amp;(!(d=this.readyState)||d==&quot;loaded&quot;||d==&quot;complete&quot;)){h((f=e.jQuery).noConflict(1),b=1);f(c).remove()}};a.documentElement.childNodes[0].appendChild(c)}})(window,document,&quot;1.11.1&quot;,function($,L){

var entriesList,
    ajaxLoader;

entriesList = [];

ajaxLoader =
  $('<div>')
    .attr('id', 'ajax-loading')
    .css('display', 'none')
    .css({
      'font-family': 'helvetica',
      'color': '#333',
      'margin': '30px',
      'background': 'transparent url(https://cdn-us-east.velaro.com/Content/Images/loading.gif) no-repeat left top',
      'display': 'block',
      'background-size': '20px 20px',
      'padding-left': '28px',
      'padding-bottom': '15px'
    })
    .html('Revisando conte√∫do da newsletter. Aguarde alguns instantes...');

$('body').prepend(ajaxLoader);

$('.entry-row').each(function() {
  var entry = {
    title: $(this).find('.entry-link').html(),
    url: $(this).find('.entry-link').attr('href'),
    subtitle: $.trim($(this).find('.entry-subtitle').html()),
    description: $.trim($(this).find('.entry-description').html()),
    tag: $(this).data('entry-tag'),
  };

  entriesList.push(entry);
});

$.ajax({
  type: 'POST',
  url: '<%= revision_service_url %>',
  contentType: 'application/json',
  data: JSON.stringify({ 'entriesList': entriesList }),
  beforeSend: function() {
    $('#revision_result').remove();
    ajaxLoader.show();
  },
  success: function(response) {
    $('body').prepend(response);
  },
  complete: function() {
    ajaxLoader.hide();
  }
});});">Revise Elixir Radar</a>
